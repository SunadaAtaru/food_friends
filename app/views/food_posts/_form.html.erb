<%= form_with(model: food_post, local: true, multipart: true) do |f| %>
  <%= render 'shared/error_messages', object: food_post %>

  <div class="mb-3">
    <%= f.label :title, "食品名", class: "form-label" %>
    <%= f.text_field :title, class: "form-control", required: true %>
  </div>

  <div class="mb-3">
    <%= f.label :description, "説明", class: "form-label" %>
    <%= f.text_area :description, class: "form-control", rows: 4 %>
  </div>

  <div class="row">
    <div class="col-md-6 mb-3">
      <%= f.label :quantity, "数量", class: "form-label" %>
      <%= f.number_field :quantity, class: "form-control", min: 1, required: true %>
    </div>
    <div class="col-md-6 mb-3">
      <%= f.label :unit, "単位", class: "form-label" %>
      <%= f.select :unit, ['個', 'kg', 'g', '袋', '箱', 'パック'], {}, { class: "form-select", required: true } %>
    </div>
  </div>

  <div class="mb-3">
    <%= f.label :expiration_date, "賞味期限", class: "form-label" %>
    <%= f.date_field :expiration_date, class: "form-control", required: true %>
  </div>

  <div class="mb-3">
    <%= f.label :pickup_location, "受け取り場所", class: "form-label" %>
    <%= f.text_field :pickup_location, class: "form-control", required: true %>
  </div>

  <div class="mb-3">
    <%= f.label :pickup_time_slot, "受け取り時間", class: "form-label" %>
    <%= f.text_field :pickup_time_slot, class: "form-control", placeholder: "例: 平日18時以降、土日終日" %>
  </div>

  <div class="mb-4">
    <%= f.label :image, "画像", class: "form-label" %>
    <%= f.file_field :image, class: "form-control" %>
    <% if food_post.image? %>
      <div class="mt-2">
        <p>現在の画像:</p>
        <%= image_tag food_post.image.thumb.url, class: "img-thumbnail", width: 200 %>
      </div>
    <% end %>
  </div>

  <div class="d-grid gap-2">
    <%= f.submit food_post.new_record? ? "投稿する" : "更新する", class: "btn btn-primary" %>
  </div>
  
  <div class="mt-3 text-center">
    <%= link_to "戻る", food_posts_path, class: "btn btn-outline-secondary" %>
  </div>
<% end %>